---
- name: Deploy app with docker-compose
  gather_facts: false
  become: true
  tasks:
  - name: Create the app dir
    file:
      path: /home/gxmzalx/p5
      state: directory
      owner: gxmzalx
      group: gxmzalx

  - name: Copy docker files
    copy:
      src: /var/lib/jenkins/workspace/P5/Practica_5
      dest: /home/gxmzalx/p5
      owner: gxmzalx
      group: gxmzalx

  - name: Run docker-compose up
    community.docker.docker_compose:
      project_src: /home/gxmzalx
      build: yes
      restarted: yes